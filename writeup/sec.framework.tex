\section{Framework}

Zur Umsetzung der Simulation verwenden und erweitern wir das Java Framework \emph{Tortuga}\footnote{\texttt{http://code.google.com/p/tortugades/}}, welches die grundlegenden Funktionalitäten einer ereignisdiskreten Simulation anbietet. Mit Hilfe aspektorientierter Programmierung wird gewährleistet, dass innerhalb des Programmcodes der selbstdefinierten Entitätsklassen jederzeit Zugriff auf die Simulation möglich ist um beispielsweise ein neues Ereignis zu registrieren.\footnote{Näheres zum Thema aspektorientierter Programmierung kann der geneigte Leser zum Beispiel \textcite{kiczales1997aspect} entnehmen. \textcite{laddad2003aspectj} beleuchtet die AspectJ-Erweiterung für aspektorientiertes Programmieren in Java genauer.}

Basisklassen für eine Simulation und Entitäten sind in Tortuga vorhanden, wobei die abstrakte Klasse \code{org.mitre.sim.DefaultEntity} vom Frame\-work\-nutzer erweitert werden muss. Abbildung~\ref{img:entities} zeigt ein UML-Klassendiagramm der Entitätshierarchie unserer Simulation. Um Bewegungen im zweidimensionalen Raum zu ermöglichen, wird zunächst die \code{DefaultEntity} um Positionsdaten und Zielkoordinaten erweitert. Die entstehende abstrakte Klasse \code{PositionedEntity} bietet bereits ein erstes Ereignis an: \code{moveTo(Position, double)}. Sie registriert ein neues Ereignis, das die Position der Entität nach einer bestimmten Zeit ändert.

Ereignisse werden in Tortuga als gewöhnliche Methoden deklariert und bei der Simulation mit Methodennamen und Parametern registriert. Das Framework ruft die Methoden dann zur entsprechenden Simulationszeit über die \emph{Java Reflection API}\footnote{Die Java Reflection API kann unter anderem verwendet werden, um Klassen oder Methoden aufzurufen, die zur Compiletime noch unbekannt sind. Sie müssen somit erst zur Laufzeit vorhanden sein. Nähere Informationen finden sich auf \texttt{http://docs.oracle.com/javase/tutorial/reflect/}.} auf.

\begin{figure}[t]
	\begin{center}
    	\includegraphics[width=1\linewidth]{entities}
  \caption{UML-Klassendiagramm der Simulationsentitäten. Private oder nicht simulationsbezogene Methoden und Attribute wurden aus Übersichtlichkeitsgründen weggelassen.}
  \label{img:entities} 
	\end{center}
\end{figure}